Great question â€” this is one of the most important â€œgotchasâ€ in Python. Letâ€™s walk through it slowly and clearly.


---

ğŸ” The Code

def add_item(item, lst=[]):
    lst.append(item)
    return lst

âš ï¸ Key Rule

ğŸ‘‰ Default arguments are evaluated only ONCE, at function definition time, not each time the function is called.

So lst=[] is created one time, and the same list is reused across calls unless you pass your own list.


---

ğŸ§  Step-by-Step Execution

âœ… First call

print(add_item(1))

lst refers to the default list â†’ []

Append 1

List becomes: [1]


Output:

[1]


---

âœ… Second call

print(add_item(2))

lst is the same default list (not a new one!)

Append 2

List becomes: [1, 2]


Output:

[1, 2]


---

âœ… Third call (important difference)

print(add_item(3, []))

You explicitly pass a new empty list

Append 3

This list is temporary and not reused


Output:

[3]


---

âœ… Fourth call

print(add_item(4))

Back to the original default list

It was [1, 2]

Append 4


Output:

[1, 2, 4]


---

ğŸ“Œ Final Output

[1]
[1, 2]
[3]
[1, 2, 4]


---

ğŸ§ª Visual Mental Model

DEFAULT LIST (shared):
[] â†’ [1] â†’ [1, 2] â†’ [1, 2, 4]

TEMP LIST (one-time):
[] â†’ [3]


---

âœ… Correct / Safe Way to Write This

def add_item(item, lst=None):
    if lst is None:
        lst = []
    lst.append(item)
    return lst

Now each call gets a fresh list unless you explicitly pass one.





